<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Memory Color Game</title>
  <link rel="stylesheet" type="text/css" href="colorstyle.css">
</head>
<body>
  <h1>ðŸŽ¨ Memory Color Game</h1>
  <p>Ghi nhá»› thá»© tá»± mÃ u vÃ  báº¥m láº¡i Ä‘Ãºng!</p>

  <div id="gameBoard">
    <div class="color-btn red" id="red"></div>
    <div class="color-btn green" id="green"></div>
    <div class="color-btn blue" id="blue"></div>
    <div class="color-btn yellow" id="yellow"></div>
  </div>

  <button id="startBtn">Báº¯t Ä‘áº§u</button>
  <div id="status"></div>
<script>
  const colors = ["red", "green", "blue", "yellow"];
  let sequence = [];
  let playerSequence = [];
  let level = 0;
  let canClick = false;

  const statusEl = document.getElementById("status");
  const startBtn = document.getElementById("startBtn");

  // Hiá»ƒn thá»‹ hiá»‡u á»©ng nháº¥p sÃ¡ng mÃ u
  function flashColor(color) {
    const btn = document.getElementById(color);
    btn.style.opacity = "1";
    btn.style.scale = "1.05";
    setTimeout(() => {
      btn.style.opacity = "0.85";
      btn.style.scale = "1";
    }, 400);
  }

  // PhÃ¡t chuá»—i mÃ u cho ngÆ°á»i chÆ¡i xem
  async function playSequence() {
    canClick = false;
    for (let color of sequence) {
      flashColor(color);
      await new Promise(res => setTimeout(res, 600));
    }
    canClick = true;
  }

  // Khi ngÆ°á»i chÆ¡i nháº¥n nÃºt mÃ u
  function handleColorClick(color) {
    if (!canClick) return;
    flashColor(color);
    playerSequence.push(color);

    const currentStep = playerSequence.length - 1;
    if (playerSequence[currentStep] !== sequence[currentStep]) {
      statusEl.textContent = "âŒ Sai rá»“i! TrÃ² chÆ¡i káº¿t thÃºc.";
      canClick = false;
      level = 0;
      sequence = [];
      startBtn.textContent = "ChÆ¡i láº¡i";
      return;
    }

    if (playerSequence.length === sequence.length) {
      level++;
      statusEl.textContent = "âœ… ÄÃºng rá»“i! Cáº¥p Ä‘á»™: " + level;
      playerSequence = [];
      setTimeout(nextRound, 1000);
    }
  }

  // Báº¯t Ä‘áº§u vÃ²ng chÆ¡i má»›i
  function nextRound() {
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    sequence.push(randomColor);
    statusEl.textContent = "Cáº¥p Ä‘á»™ " + (level + 1);
    playSequence();
  }

  startBtn.addEventListener("click", () => {
    sequence = [];
    playerSequence = [];
    level = 0;
    statusEl.textContent = "Chuáº©n bá»‹...";
    nextRound();
    startBtn.textContent = "Äang chÆ¡i...";
  });

  colors.forEach(color => {
    document.getElementById(color).addEventListener("click", () => handleColorClick(color));
  });
</script>
</body>
</html>
